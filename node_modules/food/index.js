var uripg ="postgres://qpctvfkpaktrbh:850e3c5962c7eb37c0e7b5b5383a38a0d6c537854dbba0d80052f3ff5b14707a@ec2-54-83-26-65.compute-1.amazonaws.com:5432/dav91uknip05h0";

var getFood = function(req,res){
  var pg = require('pg');
  pg.defaults.ssl = true;
  pg.connect(uripg  ,function(err, client) {
    if (err) throw err;
    client
      .query("SELECT * FROM public.food ORDER BY title_food;")
      .on("end", function(result){
        res.send(result.rows);
      });
  });
}

var getMyFood = function(req, res){
  var pg = require('pg');
  pg.defaults.ssl = true;
  pg.connect(uripg  ,function(err, client) {
    if (err) throw err;
    client
      .query("SELECT f.id_food, title_food, unityweight, quantity_getfood FROM public.food f, public.getfood g WHERE f.id_food = g.id_food and g.id_user = $1 ORDER BY title_food;"
      ,[req.query.id_user])
      .on("end", function(result){
        res.send(result.rows);
      });
  });
}


exports.getFood = getFood;
exports.getMyFood = getMyFood;
